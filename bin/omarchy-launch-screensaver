#!/bin/bash

# Exit early if screensave is already running
pgrep -f "ghostty --class=luke.screensaver" && exit 0

focused=$(hyprctl monitors -j | jq -r '.[] | select(.focused == true).name')

for m in $(hyprctl monitors -j | jq -r '.[] | .name'); do
   hyprctl dispatch focusmonitor $m
   hyprctl dispatch exec -- \
      ghostty --class=luke.screensaver \
      --background="#000000" \
      --cursor-color="#000000" \
      --font-size=18 \
      --background-opacity=1 \
      -e ~/.local/share/omarchy/bin/omarchy-cmd-screensaver
done

hyprctl dispatch focusmonitor $focused
